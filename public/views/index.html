<!DOCTYPE html>
<html>
<title>Talentum</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="http://code.jquery.com/jquery-2.2.4.min.js"></script>
<style>
    body,
    h1 {
        font-family: "Raleway", sans-serif
    }

    body,
    html {
        height: 100%
    }

    .bgimg {
        background-image: url('https://www.w3schools.com/w3images/forestbridge.jpg');
        min-height: 100%;
        background-position: center;
        background-size: cover;
    }
</style>

<body>

    <!---->
    <div class="bgimg w3-display-container w3-animate-opacity w3-text-white">
        <div class="w3-display-middle">
            <h1 style="text-align:center;">Registros</h1>
            <br><br>
            <table class="table table-striped table-dark">
                <thead >
                    <tr>
                        <th scope="col">Nombre</th>
                        <th scope="col" style="text-align:center;">ID</th>        
                        <th scope="col">ACCIONES</th>                
                    </tr>
                </thead>
                
                    <% users.forEach(function(user, index) { %>
                        <tbody>
                            <tr>
                                <td><%= user.nombre %></td>
                                <th scope="row"><%= user.id %></th>  
                                <td id=<%= user.id %> class="accion">
                                    <img id=<%= user.id %> src='./resources/delete.png' width='30' height='30' onclick="DeleteRecord(this)" style='display: inline;'>
                                    <img id=<%= user.id %> src='./resources/edit.png' width='30' height='30' onclick="ShowModal(this)" style='display: inline;'>
                                </td>                              
                            </tr>
                        </tbody>
                    <% }) %>

            </table>
            <div class="form-group text-center">
                <form method="GET" action="/add">
                    <button type="submit" class="btn btn-primary">Agregar</button>
                </form>
            </div>
        </div>

        </form>
                  
    </div>
    
    <div id="ModalExample" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>
          <p>Some text in the Modal..</p>
        </div>
      
    </div>
    <style>
        .modal {
            width: 300px;
            height: 300px;
            position: absolute;
            left: 50%;
            top: 50%; 
            margin-left: -150px;
            margin-top: -150px;
        }
        .modal-open .container-fluid, .modal-open  .container {
            -webkit-filter: blur(5px) grayscale(90%);
        }

    </style>
    <script>
   
     function DeleteRecord(jsonObj){
        $.ajax({
            method: 'POST',
            url:'/user/delete',
            data: {id:jsonObj.id},
            success: function (data) {
            location.reload();}                     
        });
        
     }   

     function ShowModal(jsonObj){
        console.log( jsonObj.id);
        console.log( "showing Modal" );
        document.getElementById("ModalExample").style.display = "block";;
     }
        
    </script>

</body>

</html>